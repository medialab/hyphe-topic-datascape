<div layout="row" flex>

	<!-- Column: Left Handle -->
  <div ng-style="{'width': widthLeftHandle+'px'}" class="flex-transition" layout="column" layout-align="center left" md-colors="{background: 'default-background-50-.2'}" ng-click="transition('search')">
    <md-button class="handle-button md-primary" ng-show="!transitioning">
      <md-icon aria-label="left">chevron_left</md-icon>
      <div class="left-handle-text"translate >SEARCH</div>
    </md-button>
  </div>

  <!-- (Hidden) Column: Map -->
  <div flex="{{flexColMap}}" class="flex-transition" layout="column">
  </div>

  <!-- (Hidden) Column: Search -->
  <div flex="{{flexColSearch}}" class="flex-transition" layout="column" md-colors="{background: 'default-background-50'}">
  </div>

  <!-- Column: Topics vis -->
  <div flex="{{flexColTopics}}" class="flex-transition" layout="column" md-colors="{background: 'default-background-50-.6'}">
    <div layout layout-fill layout-align="center center" ng-show="!topicsLoaded && !transitioning">
      <md-progress-circular md-mode="indeterminate"></md-progress-circular>
    </div>
    <md-toolbar layout="row" class="md-hue-1" ng-show="topicsLoaded && !transitioning">
      <div class="md-toolbar-tools">
        <span translate>TOPICS</span>
      </div>
    </md-toolbar>
    <div
      ng-show="topicsLoaded"
      id="topics-matrix"
      layout
      class="flex-transition"
      flex="{{flexRowMatrix}}"
    >
      <div
        id="topics-matrix-svg-container"
        ng-show="!transitioning"
        layout-fill
        topics-matrix
        topics="topics"
        topic-ranks="topicRanks"
        crossings="crossings"
        selected-crossing="selectedCrossing"
      ></div>
  	</div>
    <!-- (Hidden) Topic 1 -->
    <div flex="{{flexRowTopic}}" class="flex-transition">
      <md-toolbar layout="row" class="md-hue-1">
      </md-toolbar>
    </div>
    <!-- (Hidden) Topic 2 -->
    <div flex="{{flexRowTopic}}" class="flex-transition">
      <md-toolbar layout="row" class="md-hue-1">
      </md-toolbar>
    </div>
  </div>

  <!-- Column: Topics zoom -->
  <div flex="{{flexColSide}}" class="flex-transition" layout>
    <div ng-if="!transitioning && !selectedCrossing" layout-fill layout="column" layout-align="center center" layout-padding>
      <center style="opacity: 0.7" translate>CLICK MESSAGE</center>
    </div>
    <div ng-if="!transitioning && selectedCrossing" layout-fill layout="column" layout-align="center">
      <div flex layout="column" layout-align="start end">
        <md-button class="md-icon-button" aria-label="Close" ng-click="closeCrossing()">
          <md-icon>close</md-icon>
        </md-button>
      </div>
    	<div
        topics="topics"
        topics-index="topicsIndex"
        crossing="selectedCrossing"
        topics-crossing
      ></div>
      <div flex layout="column" layout-align="center center">
        <md-button class="md-raised" aria-label="Search overlap" ng-click="transition('search', {topicsOverlap:true})" translate>
          <md-icon>search</md-icon>
          SEARCH OVERLAP
        </md-button>
        <md-button class="md-raised md-primary" aria-label="More" ng-click="transition('topic')" translate>
          MORE DETAILS
        </md-button>
      </div>
    </div>
  </div>

</div>